# –ö–∞–∫–∏–µ –µ—Å—Ç—å –≤–∏–¥—ã –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –∫–∞–∫ –∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è

## 1. –ò–Ω–¥–µ–∫—Å—ã –≤ ElasticSearch

1. **Inverted index (–æ–±—Ä–∞—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å)**

    * –û—Å–Ω–æ–≤–Ω–æ–π —Ç–∏–ø –∏–Ω–¥–µ–∫—Å–∞ (–¥–ª—è `text` –ø–æ–ª–µ–π).
    * –°—Ç—Ä–æ–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Ç–µ—Ä–º–æ–≤ ‚Üí —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –≥–¥–µ –æ–Ω–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è.
    * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞.

2. **Keyword index**

    * –î–ª—è –ø–æ–ª–µ–π `keyword` (—Ç–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è).
    * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, —Ñ–∏–ª—å—Ç—Ä—ã.
    * –ù–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è, —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å.

3. **Numeric / Date indices**

    * –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –¥–∏–∞–ø–∞–∑–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (`range`).
    * –•—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∏–¥–µ BKD-–¥–µ—Ä–µ–≤—å–µ–≤ (point values).

4. **Doc values**

    * –ö–æ–ª–æ–Ω–Ω–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ –¥–∏—Å–∫–µ.
    * –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–π, —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ–∫, —Å–∫—Ä–∏–ø—Ç–æ–≤.
    * –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω—ã –¥–ª—è `keyword`, `numeric`, `date`.

5. **Geo indices**

    * `geo_point` ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (lat/lon), –ø–æ–¥–¥–µ—Ä–∂–∫–∞ geo-distance, bounding box.
    * `geo_shape` ‚Äî –ø–æ–ª–∏–≥–æ–Ω—ã, –ª–∏–Ω–∏–∏, —Å–ª–æ–∂–Ω—ã–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏.

6. **Special indices**

    * **Nested** ‚Äî –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ (—Å–≤—è–∑—å –≤–Ω—É—Ç—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞).
    * **Percolator** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–æ–±—Ä–∞—Ç–Ω—ã–π –ø–æ–∏—Å–∫: –¥–æ–∫—É–º–µ–Ω—Ç ‚Üí –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã).

---

## 2. –ò–Ω–¥–µ–∫—Å—ã –≤ MongoDB

1. **Single field index**

    * –ò–Ω–¥–µ–∫—Å –ø–æ –æ–¥–Ω–æ–º—É –ø–æ–ª—é.
    * –ü—Ä–∏–º–µ—Ä: `{ name: 1 }`.

2. **Compound index**

    * –ò–Ω–¥–µ–∫—Å –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º.
    * –ü—Ä–∏–º–µ—Ä: `{ status: 1, createdAt: -1 }`.
    * –í–∞–∂–Ω–æ: –ø–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.

3. **Multikey index**

    * –î–ª—è –º–∞—Å—Å–∏–≤–æ–≤.
    * –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞.
    * –ü—Ä–∏–º–µ—Ä: `{ tags: 1 }` –¥–ª—è `["java","spring"]`.

4. **Text index**

    * –î–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞.
    * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–µ–º–º–∏–Ω–≥, —Å—Ç–æ–ø-—Å–ª–æ–≤–∞.
    * –ü—Ä–∏–º–µ—Ä: `{ description: "text" }`.

5. **Hashed index**

    * –•—Ä–∞–Ω–∏—Ç —Ö—ç—à –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è.
    * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
    * –ü—Ä–∏–º–µ—Ä: `{ userId: "hashed" }`.

6. **TTL (Time-to-Live) index**

    * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏.
    * –ü—Ä–∏–º–µ—Ä: `{ "createdAt": 1 }` + `expireAfterSeconds: 3600`.

7. **2d / 2dsphere index**

    * –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã.
    * `2d` ‚Äî –¥–ª—è –ø–ª–æ—Å–∫–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.
    * `2dsphere` ‚Äî –¥–ª—è —Å—Ñ–µ—Ä–∏—á–µ—Å–∫–æ–π –≥–µ–æ–º–µ—Ç—Ä–∏–∏ (—à–∏—Ä–æ—Ç–∞/–¥–æ–ª–≥–æ—Ç–∞).

8. **Unique index**

    * –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π –≤ –ø–æ–ª–µ.
    * –ü—Ä–∏–º–µ—Ä: `{ email: 1, unique: true }`.

9. **Partial index**

    * –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–µ —É—Å–ª–æ–≤–∏—é.
    * –ü—Ä–∏–º–µ—Ä: `{ status: 1 }` c `partialFilterExpression: { status: "ACTIVE" }`.

10. **Sparse index**

* –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –≥–¥–µ –ø–æ–ª–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
* –ü—Ä–∏–º–µ—Ä: `{ middleName: 1, sparse: true }`.

---

## 3. –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏–Ω–¥–µ–∫—Å–∞–º–∏

* **–í ElasticSearch**:

    * –ò–Ω–¥–µ–∫—Å—ã –∑–∞–¥–∞—é—Ç—Å—è –≤ **mapping** (—Ç–∏–ø –ø–æ–ª—è).
    * –î–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `keyword`/`numeric`/`date`.
    * –î–ª—è –ø–æ–∏—Å–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `text` —Å –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º.
    * –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ ‚Üí `explain` / `profile`.

* **–í MongoDB**:

    * –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π:

      ```js
      db.collection.createIndex({ field: 1 })
      ```
    * –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ‚Üí `db.collection.explain().find({...})`.
    * –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Äî –∫–æ–º–∞–Ω–¥–∞ `db.collection.getIndexes()`.
    * –ù–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å: –ª–∏—à–Ω–∏–µ –∏–Ω–¥–µ–∫—Å—ã –∑–∞–º–µ–¥–ª—è—é—Ç –∑–∞–ø–∏—Å—å –∏ –∑–∞–Ω–∏–º–∞—é—Ç –ø–∞–º—è—Ç—å.

---

## 4. –í—ã–∂–∏–º–∫–∞ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

* **ElasticSearch**:

    * –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ö–∞–Ω–∏–∑–º ‚Äî **–æ–±—Ä–∞—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å** (–¥–ª—è —Ç–µ–∫—Å—Ç–∞).
    * `keyword` –ø–æ–ª—è ‚Üí —Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏.
    * –ß–∏—Å–ª–∞/–¥–∞—Ç—ã ‚Üí BKD-–¥–µ—Ä–µ–≤—å—è (–¥–∏–∞–ø–∞–∑–æ–Ω—ã).
    * Geo ‚Üí `geo_point`, `geo_shape`.
    * Nested ‚Üí –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤.

* **MongoDB**:

    * –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã: single, compound, multikey, text, hashed, TTL, geo, unique, sparse, partial.
    * –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–æ–ª—å–∫–æ `_id`.
    * –í–∞–∂–Ω–æ: –ø–æ—Ä—è–¥–æ–∫ –≤ compound, –≤—ã–±–æ—Ä shard key, –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏.

üëâ –ì–ª–∞–≤–Ω–æ–µ: ElasticSearch = –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, MongoDB = –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.
