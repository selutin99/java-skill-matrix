# –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–µ—Ç–∏ docker

## 1. –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

* **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä = –ø—Ä–æ—Ü–µ—Å—Å**, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ, –Ω–æ ¬´–≤–∏–¥–∏—Ç¬ª —Å–≤–æ—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ä–µ–¥—É.
* –ë–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö —è–¥—Ä–∞ Linux:

    * **Namespaces** ‚Äî –∏–∑–æ–ª—è—Ü–∏—è:

        * PID (–ø—Ä–æ—Ü–µ—Å—Å—ã),
        * NET (—Å–µ—Ç—å),
        * MNT (—Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã),
        * UTS (hostname),
        * IPC (–º–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ),
        * USER (UID/GID).
    * **cgroups** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU, RAM, IO).
    * **UnionFS (OverlayFS)** ‚Äî –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:

        * –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ (Ubuntu, Alpine),
        * —Å–ª–æ–∏ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏,
        * –≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

üëâ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ –Ω–µ ¬´–º–∞–ª–µ–Ω—å–∫–∞—è –≤–∏—Ä—Ç—É–∞–ª–∫–∞¬ª, –∞ **–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å rootfs –∏ —Å–≤–æ–∏–º–∏ –Ω–µ–π–º—Å–ø–µ–π—Å–∞–º–∏**.

---

## 2. –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **—ç—Ñ–µ–º–µ—Ä–µ–Ω**: –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–ø–∞–¥–∞—é—Ç.
–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç **volumes** –∏ **bind mounts**.

### 2.1. Volumes (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

* –£–ø—Ä–∞–≤–ª—è—é—Ç—Å—è Docker.
* –ñ–∏–≤—É—Ç –≤ `/var/lib/docker/volumes/...`.
* –ú–æ–≥—É—Ç —à–∞—Ä–∏—Ç—å—Å—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

```bash
docker volume create mydata
docker run -d -v mydata:/var/lib/mysql mysql:8
```

### 2.2. Bind mounts

* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–∏ —Ö–æ—Å—Ç–∞ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
* –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

```bash
docker run -d -v /home/user/app:/app node:20
```

### 2.3. tmpfs mount

* –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ (RAM), –∏—Å—á–µ–∑–∞–µ—Ç –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.

```bash
docker run -d --mount type=tmpfs,destination=/cache nginx
```

### 2.4. docker-compose (volumes)

```yaml
services:
  db:
    image: postgres:16
    volumes:
      - db_data:/var/lib/postgresql/data

volumes:
  db_data:
```

---

## 3. –°–µ—Ç–∏ Docker

Docker —Å–æ–∑–¥–∞—ë—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ç–∏ –¥–ª—è —Å–≤—è–∑–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

### 3.1. –¢–∏–ø—ã —Å–µ—Ç–µ–π

* **bridge** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

    * –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç IP –∏–∑ bridge-—Å–µ—Ç–∏,
    * –æ–±—â–∞—é—Ç—Å—è –ø–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ (`ping app`).

  ```bash
  docker network create mynet
  docker run -d --network=mynet --name=app1 nginx
  docker run -d --network=mynet --name=app2 alpine sleep 3600
  docker exec -it app2 ping app1
  ```

* **host**:

    * –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ —Ö–æ—Å—Ç–∞**,
    * –Ω–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ —Å–µ—Ç–∏.

  ```bash
  docker run --network host nginx
  ```

* **none**:

    * –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ–∑ —Å–µ—Ç–∏ (–∏–∑–æ–ª—è—Ü–∏—è).

* **overlay**:

    * –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Docker Swarm/Kubernetes,
    * –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ö–æ—Å—Ç–æ–≤ –≤ –æ–¥–Ω—É —Å–µ—Ç—å.

### 3.2. –ú–∞–ø–ø–∏–Ω–≥ –ø–æ—Ä—Ç–æ–≤

* –ü—Ä–∏ `-p 8080:80` —Å–æ–∑–¥–∞—ë—Ç—Å—è DNAT: –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `host:8080` ‚Üí `container:80`.

### 3.3. DNS –∏ discovery

* Docker –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç DNS ‚Üí –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π —Å–µ—Ç–∏.

---

## 4. –í—ã–∂–∏–º–∫–∞ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

* **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–Ω—É—Ç—Ä–∏**: —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ —Ö–æ—Å—Ç–µ, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ **namespaces** (PID, NET, MNT –∏ –¥—Ä.), —Å –ª–∏–º–∏—Ç–∞–º–∏ –æ—Ç **cgroups**, —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –Ω–∞ **OverlayFS**.
* **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–∞–º –ø–æ —Å–µ–±–µ —ç—Ñ–µ–º–µ—Ä–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **volumes** (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞, —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è Docker), **bind mounts** (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏), **tmpfs** (RAM).
* **–°–µ—Ç–∏ Docker**:

    * bridge (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–±—â–∞—é—Ç—Å—è –ø–æ –∏–º–µ–Ω–∏),
    * host (–±–µ–∑ –∏–∑–æ–ª—è—Ü–∏–∏),
    * none (–±–µ–∑ —Å–µ—Ç–∏),
    * overlay (–º—É–ª—å—Ç–∏-—Ö–æ—Å—Ç).
* **–ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤**: `-p host:container`.
* **Best practice**:

    * —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ volumes, –∞ –Ω–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞,
    * –¥–ª—è dev ‚Äî bind mounts,
    * –¥–ª—è prod ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ç–∏ (frontend/backend), —á—Ç–æ–±—ã –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø.
