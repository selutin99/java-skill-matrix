# –ß—Ç–æ —Ç–∞–∫–æ–µ write ahead log\transaction log, –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Write-Ahead Log (WAL) / Transaction Log

**–ñ—É—Ä–Ω–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (transaction log, WAL ‚Äî Write Ahead Log)** ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (–∏–ª–∏ –Ω–∞–±–æ—Ä —Ñ–∞–π–ª–æ–≤), –∫—É–¥–∞ **–≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∂—É—Ä–Ω–∞–ª, –∞ —É–∂–µ –ø–æ—Ç–æ–º –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —Å–∞–º–∏–º —Ç–∞–±–ª–∏—Ü–∞–º**.

–≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤–∞ **Durability** –∏–∑ ACID: –ø–æ—Å–ª–µ `COMMIT` –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ–µ.

---

## 2. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç WAL

### –ü—Ä–æ—Ü–µ—Å—Å –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

1. –ö–ª–∏–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç `INSERT / UPDATE / DELETE`.
2. –°–£–ë–î **–Ω–µ —Å—Ä–∞–∑—É –º–µ–Ω—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É –Ω–∞ –¥–∏—Å–∫–µ** (—ç—Ç–æ –±—ã–ª–æ –±—ã –º–µ–¥–ª–µ–Ω–Ω–æ).
3. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–∞:

    * –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ **WAL (–∂—É—Ä–Ω–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)** ‚Äî —ç—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ª–æ–≥ (–æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π, —Ç.–∫. –∑–∞–ø–∏—Å—å –∏–¥—ë—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ).
    * –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ (–±—É—Ñ–µ—Ä –∫—ç—à–∞).
4. –ö–æ–≥–¥–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–µ–ª–∞–µ—Ç `COMMIT` ‚Üí –∑–∞–ø–∏—Å—å –≤ –∂—É—Ä–Ω–∞–ª –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è.
5. –ü–æ–∑–∂–µ (—Ñ–æ–Ω–æ–≤—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏) –°–£–ë–î —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ –ø–∞–º—è—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –¥–∏—Å–∫–µ.

üëâ –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ —É–ø–∞–¥—ë—Ç –¥–æ —Å–±—Ä–æ—Å–∞ ‚Äî –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ë–î –ø—Ä–æ—á–∏—Ç–∞–µ—Ç WAL –∏ **–ø—Ä–∏–º–µ–Ω–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–Ω–æ–≤–æ** (replay).

---

## 3. –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω WAL

1. **–ì–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ (Durability)**

    * –î–∞–∂–µ –ø—Ä–∏ —Å–±–æ–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –ø–∏—Ç–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.

2. **–£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã**

    * –ó–∞–ø–∏—Å—å –≤ –∂—É—Ä–Ω–∞–ª ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (–±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü—É).
    * –¢–∞–±–ª–∏—Ü—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ–∑–∂–µ –ø–∞–∫–µ—Ç–∞–º–∏ (—á–µ—Ä–µ–∑ checkpointer).

3. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è (Crash Recovery)**

    * –ü—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ –ë–î –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç WAL –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ë–î –≤ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

4. **–†–µ–ø–ª–∏–∫–∞—Ü–∏—è**

    * –í PostgreSQL, MySQL (InnoDB) –∏ –¥—Ä. —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –ø–µ—Ä–µ–¥–∞—á–µ WAL (—Ä–µ–ø–ª–∏–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ –ª–æ–≥–∞).

5. **Point-in-time recovery (PITR)**

    * –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–î –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏, ¬´–ø—Ä–æ–∫—Ä—É—Ç–∏–≤¬ª WAL –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞.

---

## 4. –ü—Ä–∏–º–µ—Ä (PostgreSQL)

* –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–Ω–∞—á–∞–ª–∞ –∏–¥—ë—Ç –≤ `pg_wal/` (–∂—É—Ä–Ω–∞–ª).
* –ü–æ—Ç–æ–º —Ñ–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (`checkpointer`, `bgwriter`) —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç dirty pages –Ω–∞ –¥–∏—Å–∫.
* –ü—Ä–∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ WAL —Å—Ç—Ä–∏–º–∏—Ç—Å—è –Ω–∞ standby-—Å–µ—Ä–≤–µ—Ä—ã.

---

## 5. –í—ã–∂–∏–º–∫–∞ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

* **WAL (transaction log)** ‚Äî –∂—É—Ä–Ω–∞–ª, –∫—É–¥–∞ —Å–Ω–∞—á–∞–ª–∞ –ø–∏—à—É—Ç—Å—è –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∞ –ø–æ—Ç–æ–º –æ–Ω–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —Ç–∞–±–ª–∏—Ü–∞–º.
* –ù—É–∂–µ–Ω –¥–ª—è:

    * **Durability** (ACID) ‚Äî –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ–µ.
    * **Crash recovery** ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏—è.
    * **–†–µ–ø–ª–∏–∫–∞—Ü–∏–∏** ‚Äî –ø–µ—Ä–µ—Å—ã–ª–∫–∞ WAL –Ω–∞ —Ä–µ–ø–ª–∏–∫–∏.
    * **–ë—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è** ‚Äî –∑–∞–ø–∏—Å—å –≤ –∂—É—Ä–Ω–∞–ª –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –≤ —Ç–∞–±–ª–∏—Ü—É.
* –ü—Ä–∏–Ω—Ü–∏–ø: *—Å–Ω–∞—á–∞–ª–∞ –ª–æ–≥, –ø–æ—Ç–æ–º –¥–∞–Ω–Ω—ã–µ* (¬´write-ahead¬ª).
