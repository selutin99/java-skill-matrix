# Как связываются таблицы и типы связей (1-1, 1-n, n-n)

## 1. Как связываются таблицы

Таблицы связываются с помощью **ключей**:

* **Первичный ключ (PK)** — уникальный идентификатор строки в таблице.
* **Внешний ключ (FK)** — поле, которое ссылается на PK другой таблицы.

Таким образом, между таблицами формируются **отношения**.

---

## 2. Типы связей

### 1. **Один-к-одному (1:1)**

* Каждой строке в таблице A соответствует **ровно одна** строка в таблице B.
* Используется, если сущность логически одна, но хранится в разных таблицах (например, из соображений безопасности или оптимизации).

**Пример:**

* Таблица `Users` (пользователи)
* Таблица `Passports` (паспортные данные)
* У каждого пользователя может быть только один паспорт.

```sql
Users(user_id PK, name)
Passports(passport_id PK, user_id FK UNIQUE, number)
```

---

### 2. **Один-ко-многим (1\:N)**

* Одной строке в таблице A соответствует **несколько строк** в таблице B.
* Самый распространённый случай.

**Пример:**

* Пользователь может сделать несколько заказов.

```sql
Users(user_id PK, name)
Orders(order_id PK, user_id FK, product)
```

Здесь один пользователь (A) ↔ много заказов (B).

---

### 3. **Многие-ко-многим (M\:N)**

* Одной строке в таблице A соответствует несколько строк в B, и наоборот.
* Для реализации требуется **промежуточная таблица (join table)**.

**Пример:**

* Студенты записываются на несколько курсов, и курс посещают несколько студентов.

```sql
Students(student_id PK, name)
Courses(course_id PK, title)
Student_Courses(student_id FK, course_id FK, PRIMARY KEY(student_id, course_id))
```

Здесь `Student_Courses` — связующая таблица.

---

## 3. Выжимка для собеседования

* Таблицы связываются через **PK–FK**.
* **1:1** — уникальная пара, редко используется.
* **1\:N** — самый частый случай (один → много).
* **M\:N** — реализуется через промежуточную таблицу.
