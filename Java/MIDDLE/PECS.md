# –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤, PECS, —Å—Ç–∏—Ä–∞–Ω–∏–µ —Ç–∏–ø–æ–≤

## **1. –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤**

–í Java –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ **–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã**:
`List<Number>` **–Ω–µ —è–≤–ª—è–µ—Ç—Å—è** –Ω–∏ –ø–æ–¥—Ç–∏–ø–æ–º `List<Object>`, –Ω–∏ –ø–æ–¥—Ç–∏–ø–æ–º `List<Integer>`.

**–ü–æ—á–µ–º—É —Ç–∞–∫?**
–ï—Å–ª–∏ –±—ã `List<Integer>` –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –≤ `List<Number>`, —Ç–æ –º—ã –º–æ–≥–ª–∏ –±—ã —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫:

```java
List<Integer> integers = new ArrayList<>();
List<Number> numbers = integers; // –µ—Å–ª–∏ –±—ã –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ–∑–≤–æ–ª—è–ª
numbers.add(3.14); // Double ‚Äî —ç—Ç–æ Number
Integer i = integers.get(0); // BOOM! ClassCastException
```

–ü–æ—ç—Ç–æ–º—É Java —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã —Ç–∏–ø –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Å–æ–≤–ø–∞–¥–∞–ª **—Ç–æ—á–Ω–æ**, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **wildcard** (`?`).

---

## **2. –ü—Ä–∞–≤–∏–ª–æ PECS (Producer Extends, Consumer Super)**

–≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ, –≤–≤–µ–¥—ë–Ω–Ω–æ–µ –î–∂–æ—à—É–∞ –ë–ª–æ—Ö–æ–º, –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞–ø–æ–º–Ω–∏—Ç—å, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `? extends` –∏ `? super`.

* **PE** (Producer Extends) ‚Äî –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä **–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç** –∑–Ω–∞—á–µ–Ω–∏—è (–º—ã —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ–º), –∏—Å–ø–æ–ª—å–∑—É–µ–º `? extends T`:

```java
List<? extends Number> list = List.of(1, 2, 3);
Number n = list.get(0); // —á–∏—Ç–∞—Ç—å –º–æ–∂–Ω–æ
// list.add(42); // –Ω–µ–ª—å–∑—è ‚Äî –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, Integer —Ç–∞–º –∏–ª–∏ Double
```

* **CS** (Consumer Super) ‚Äî –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä **–ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç** –∑–Ω–∞—á–µ–Ω–∏—è (–º—ã —Ç–æ–ª—å–∫–æ –ø–∏—à–µ–º), –∏—Å–ø–æ–ª—å–∑—É–µ–º `? super T`:

```java
List<? super Integer> list = new ArrayList<Number>();
list.add(42); // –º–æ–∂–Ω–æ ‚Äî Integer –ø–æ–¥–æ–π–¥—ë—Ç
Object obj = list.get(0); // —á–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–∞–∫ Object
```

* **–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ —á–∏—Ç–∞–µ—Ç, –∏ –ø–∏—à–µ—Ç** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º **—Ç–æ—á–Ω—ã–π —Ç–∏–ø** `List<T>`.

---

## **3. –°—Ç–∏—Ä–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ (Type Erasure)**

Generics –≤ Java ‚Äî **—Ñ–∏—á–∞ –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**. –í —Ä–∞–Ω—Ç–∞–π–º–µ –≤—Å–µ —Ç–∏–ø–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã **—Å—Ç–∏—Ä–∞—é—Ç—Å—è**:
`List<String>` –∏ `List<Integer>` –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±–∞ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø—Ä–æ—Å—Ç–æ `List`.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**

1. **–ù–µ–ª—å–∑—è** —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤ –Ω–∞–ø—Ä—è–º—É—é:

```java
List<String> list = new ArrayList<String>(); // OK
List<String> list = new ArrayList<>();       // OK
List<String> list = new ArrayList<String>(); // –Ω–æ new ArrayList<String>() ‚Äî –Ω–µ –Ω–æ–≤—ã–π —Ç–∏–ø
```

2. **–ù–µ–ª—å–∑—è** —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–∞—Å—Å–∏–≤—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤:

```java
List<String>[] arr = new List<String>[10]; // Compile error
```

3. **–ù–µ–ª—å–∑—è** –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å –º–µ—Ç–æ–¥—ã, —Ä–∞–∑–ª–∏—á–∞—é—â–∏–µ—Å—è —Ç–æ–ª—å–∫–æ generic-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```java
void process(List<String> list) { }
void process(List<Integer> list) { } // Compile error ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –ø–æ—Å–ª–µ —Å—Ç–∏—Ä–∞–Ω–∏—è
```

4. **`instanceof` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å raw-—Ç–∏–ø–∞–º–∏**:

```java
if (obj instanceof List<String>) { } // Compile error
if (obj instanceof List<?>) { }      // OK
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º**
–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç **upper bound** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `Object`) –≤–º–µ—Å—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:

```java
class Box<T> {
    T value;
    T get() { return value; }
}
```

–ü–æ—Å–ª–µ —Å—Ç–∏—Ä–∞–Ω–∏—è:

```java
class Box {
    Object value;
    Object get() { return value; }
}
```

–ê –∫–∞—Å—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –º–µ—Å—Ç–∞—Ö –≤—ã–∑–æ–≤–∞.

---

üí° **–ö—Ä–∞—Ç–∫–∏–π –∫–æ–Ω—Å–ø–µ–∫—Ç –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è:**

* –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å ‚Äî –±–µ–∑ wildcard —Ç–∏–ø—ã –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Ç–æ—á–Ω–æ.
* PECS ‚Äî `? extends` –¥–ª—è —á—Ç–µ–Ω–∏—è, `? super` –¥–ª—è –∑–∞–ø–∏—Å–∏.
* Type erasure ‚Äî generics —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –≤ —Ä–∞–Ω—Ç–∞–π–º–µ —ç—Ç–æ –æ–±—ã—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –±–µ–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ —Ç–∏–ø–∞.
