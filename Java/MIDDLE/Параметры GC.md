# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã GC -Xms, -Xmx, -Xss

## **1. `-Xms` ‚Äî –Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä heap**

* –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç **—Å—Ç–∞—Ä—Ç–æ–≤—ã–π –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏** –¥–ª—è –∫—É—á–∏ (heap).
* –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ JVM —Å—Ä–∞–∑—É –≤—ã–¥–µ–ª—è–µ—Ç —ç—Ç–æ—Ç –æ–±—ä—ë–º –∏–∑ –û–°.
* –ï—Å–ª–∏ –ø–∞–º—è—Ç–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ ‚Äî JVM –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å heap (–¥–æ `-Xmx`), –µ—Å–ª–∏ –º–µ–Ω—å—à–µ ‚Äî –Ω–µ —É–º–µ–Ω—å—à–∞–µ—Ç –µ–≥–æ (–µ—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω GC, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π —Å–∂–∞—Ç–∏–µ).

**–ü—Ä–∏–º–µ—Ä:**

```bash
java -Xms512m MyApp
```

‚Äî JVM —Å—Ç–∞—Ä—Ç—É–µ—Ç —Å –∫—É—á–µ–π –≤ 512 –ú–ë.

---

## **2. `-Xmx` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä heap**

* –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–≤–µ—Ä—Ö–Ω–∏–π –ø—Ä–µ–¥–µ–ª –∫—É—á–∏**, –≤—ã—à–µ –∫–æ—Ç–æ—Ä–æ–≥–æ JVM –ø–∞–º—è—Ç—å –Ω–µ –≤—ã–¥–µ–ª–∏—Ç.
* –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–∞–º—è—Ç–∏ ‚Äî –±—É–¥–µ—Ç `OutOfMemoryError: Java heap space`.

**–ü—Ä–∏–º–µ—Ä:**

```bash
java -Xmx1024m MyApp
```

‚Äî –º–∞–∫—Å–∏–º—É–º 1 –ì–ë –ø–∞–º—è—Ç–∏ –¥–ª—è –∫—É—á–∏.

---

## **3. `-Xss` ‚Äî —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ –Ω–∞ –ø–æ—Ç–æ–∫**

* –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –ø–æ–¥ **—Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞.
* –í —Å—Ç–µ–∫–µ —Ö—Ä–∞–Ω—è—Ç—Å—è:

    * –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ,
    * —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã,
    * –∞–¥—Ä–µ—Å –≤–æ–∑–≤—Ä–∞—Ç–∞,
    * –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è JIT.
* –ß–µ–º –º–µ–Ω—å—à–µ —Å—Ç–µ–∫ ‚Äî —Ç–µ–º **–±–æ–ª—å—à–µ –ø–æ—Ç–æ–∫–æ–≤** –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å, –Ω–æ –≤—ã—à–µ —Ä–∏—Å–∫ `StackOverflowError`.
* –ß–µ–º –±–æ–ª—å—à–µ —Å—Ç–µ–∫ ‚Äî —Ç–µ–º –º–µ–Ω—å—à–µ –ø–æ—Ç–æ–∫–æ–≤, –Ω–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫—É—é —Ä–µ–∫—É—Ä—Å–∏—é.

**–ü—Ä–∏–º–µ—Ä:**

```bash
java -Xss512k MyApp
```

‚Äî –∫–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –ø–æ–ª—É—á–∏—Ç —Å—Ç–µ–∫ —Ä–∞–∑–º–µ—Ä–æ–º 512 –ö–ë.

---

## **4. –ö–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É**

* **`-Xms` –∏ `-Xmx` —á–∞—Å—Ç–æ —Å—Ç–∞–≤—è—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏**, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫—É—á–∏ –∏ —É–º–µ–Ω—å—à–∏—Ç—å –ø–∞—É–∑—ã GC.

  ```bash
  java -Xms2g -Xmx2g MyApp
  ```
* **`-Xss` –Ω—É–∂–Ω–æ –ø–æ–¥–±–∏—Ä–∞—Ç—å –ø–æ —á–∏—Å–ª—É –ø–æ—Ç–æ–∫–æ–≤**. –ù–∞–ø—Ä–∏–º–µ—Ä:

    * –ï—Å–ª–∏ —É –≤–∞—Å —Ç—ã—Å—è—á–∏ –ø–æ—Ç–æ–∫–æ–≤ (Netty, high-load), —Å—Ç–µ–∫ –Ω—É–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å (`-Xss256k`).
    * –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–ª—É–±–æ–∫–∞—è —Ä–µ–∫—É—Ä—Å–∏—è ‚Äî —Å—Ç–µ–∫ –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å (`-Xss1m` –∏–ª–∏ –±–æ–ª—å—à–µ).

---

## **5. –ù–∞ —á—Ç–æ –≤–ª–∏—è—é—Ç –∫–æ—Å–≤–µ–Ω–Ω–æ**

* **–ë–æ–ª—å—à–æ–π `-Xmx` ‚Üí —Ä–µ–∂–µ GC, –Ω–æ –¥–æ–ª—å—à–µ –ø–∞—É–∑—ã Full GC.**
* **–ú–∞–ª–µ–Ω—å–∫–∏–π `-Xms` ‚Üí heap —á–∞—Å—Ç–æ –±—É–¥–µ—Ç —Ä–∞—Å—Ç–∏ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ ‚Üí —Ç–æ—Ä–º–æ–∑–∞.**
* **–°–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π `-Xss` ‚Üí StackOverflowError –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ–±–æ–ª—å—à–æ–π –≥–ª—É–±–∏–Ω–µ —Ä–µ–∫—É—Ä—Å–∏–∏.**
* **–°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π `-Xss` ‚Üí –Ω–µ–ª—å–∑—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–æ–≤, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å—É–º–º–∞—Ä–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ = —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤ √ó Xss.**

---

üìå **–ö—Ä–∞—Ç–∫–æ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è**

* `-Xms` ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –∫—É—á–∏.
* `-Xmx` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫—É—á–∏.
* `-Xss` ‚Äî —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ –Ω–∞ –ø–æ—Ç–æ–∫.
* –û–±—ã—á–Ω–æ `-Xms` = `-Xmx` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏, `-Xss` –ø–æ–¥–±–∏—Ä–∞—é—Ç –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É –∏ –≥–ª—É–±–∏–Ω—É —Ä–µ–∫—É—Ä—Å–∏–∏.
