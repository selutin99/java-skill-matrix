# Reflection –¥–ª—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π

## **1. –ß—Ç–æ —Ç–∞–∫–æ–µ reflection –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π**

**Reflection** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º Java, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤, –º–µ—Ç–æ–¥–æ–≤ –∏ –ø–æ–ª–µ–π **–≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**.
–° –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ reflection –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

* **—á—Ç–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –ø–æ–º–µ—á–µ–Ω—ã `@Transactional`);
* **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ª–æ–≥–∏–∫–∏** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π, DI-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏);
* **–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π.

---

## **2. –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏**

–í Java –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ —Ç–æ–∂–µ –æ–±—ä–µ–∫—Ç—ã (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã), –¥–æ—Å—Ç—É–ø–Ω—ã–µ —á–µ—Ä–µ–∑ reflection API.
–ö–ª–∞—Å—Å `Class`, `Method`, `Field`, `Constructor` –∏ `Package` –∏–º–µ—é—Ç –º–µ—Ç–æ–¥—ã:

* `getAnnotation(Class<A> annotationClass)` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –∏–ª–∏ `null`;
* `getAnnotations()` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ (–≤–∫–ª—é—á–∞—è —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã–µ);
* `getDeclaredAnnotations()` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ —è–≤–Ω–æ (–±–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è);
* `isAnnotationPresent(Class<? extends Annotation> annotationClass)` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏.

---

## **3. –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä**

–°–æ–∑–¥–∞–¥–∏–º —Å–≤–æ—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë –Ω–∞ –∫–ª–∞—Å—Å–µ:

```java
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface MyAnnotation {
    String value();
}
```

–ü—Ä–∏–º–µ–Ω–∏–º:

```java
public class Demo {
    @MyAnnotation("test method")
    public void doSomething() { }
}
```

–ü—Ä–æ—á–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑ reflection:

```java
Class<?> clazz = Demo.class;
for (Method method : clazz.getDeclaredMethods()) {
    if (method.isAnnotationPresent(MyAnnotation.class)) {
        MyAnnotation ann = method.getAnnotation(MyAnnotation.class);
        System.out.println("–ú–µ—Ç–æ–¥ " + method.getName() + 
                           " –ø–æ–º–µ—á–µ–Ω –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º: " + ann.value());
    }
}
```

–í—ã–≤–æ–¥:

```
–ú–µ—Ç–æ–¥ doSomething –ø–æ–º–µ—á–µ–Ω –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º: test method
```

---

## **4. –†–µ—Ç–µ–Ω—à–Ω ‚Äî –∫–æ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è**

–ß—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ reflection, –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å:

```java
@Retention(RetentionPolicy.RUNTIME)
```

–ò–Ω–∞—á–µ:

* `SOURCE` ‚Äî –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `@Override`);
* `CLASS` ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ class-—Ñ–∞–π–ª–µ, –Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è;
* `RUNTIME` ‚Äî –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ reflection.

---

## **5. –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### **A. –§—Ä–µ–π–º–≤–æ—Ä–∫–∏ DI (Spring, CDI, Guice)**

* –ß–∏—Ç–∞—é—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ (`@Component`, `@Inject`, `@Autowired`).
* –°–æ–∑–¥–∞—é—Ç –æ–±—ä–µ–∫—Ç—ã –∏–ª–∏ –ø—Ä–æ–∫—Å–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.

### **B. –í–∞–ª–∏–¥–∞—Ü–∏—è**

* –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –≤—Ä–æ–¥–µ `@NotNull`, `@Size` —á–∏—Ç–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ reflection ‚Üí –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

### **C. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ / AOP**

* `@LogExecutionTime` ‚Üí –∞—Å–ø–µ–∫—Ç –∏—â–µ—Ç –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏.

### **D. –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã**

* –í—ã –º–æ–∂–µ—Ç–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–∞ –Ω—ë–º –µ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è.

---

## **6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏**

* **Reflection –º–µ–¥–ª–µ–Ω–Ω–µ–µ**, —á–µ–º –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤, –Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á —ç—Ç–æ –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ (—á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ).
* **–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –Ω–µ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ** ‚Äî –æ–Ω–∏ —Ç–æ–ª—å–∫–æ —Ö—Ä–∞–Ω—è—Ç –¥–∞–Ω–Ω—ã–µ (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ).
* **–†–∞–±–æ—Ç–∞ —Ç–æ–ª—å–∫–æ —Å RUNTIME-–∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏** ‚Äî –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Å `CLASS` –∏ `SOURCE` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ª–∏–±–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º, –ª–∏–±–æ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º–∏ (APT).
* **SecurityManager** (–≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Java) –º–æ–≥ –∑–∞–ø—Ä–µ—â–∞—Ç—å reflection, –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö ‚Äî —á–µ—Ä–µ–∑ –º–æ–¥—É–ª–∏ (Java 9+).

---

## **7. –†–∞–∑–Ω–∏—Ü–∞ —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º–∏**

* **Reflection** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç **–≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** (runtime).
* **Annotation processing** (`javax.annotation.processing`) ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç **–≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**, –≥–µ–Ω–µ—Ä–∏—Ä—É—è –∫–æ–¥ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π.

---

üìå **–ö—Ä–∞—Ç–∫–æ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è**

> Reflection –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª—É—á–∞—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —É –∫–ª–∞—Å—Å–æ–≤, –º–µ—Ç–æ–¥–æ–≤ –∏ –ø–æ–ª–µ–π 
> (`getAnnotation`, `isAnnotationPresent`), –∞ –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, 
> DI, AOP –∏–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏. –ß—Ç–æ–±—ã –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –±—ã–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ reflection, –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å 
> `@Retention(RetentionPolicy.RUNTIME)`.
